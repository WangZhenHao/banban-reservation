(function(e){function t(t){for(var a,r,c=t[0],i=t[1],u=t[2],d=0,l=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);f&&f(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},s=[];function c(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"db65bbfc"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={about:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({about:"about"}[e]||e)+"."+{about:"f6fea756"}[e]+".css",o=i.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===o))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],d=u.getAttribute("data-href");if(d===a||d===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[e],f.parentNode.removeChild(f),n(s)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=s);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=c(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/banban-reservation/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4360:function(e,t,n){"use strict";n("d3b7"),n("b64b");var a=n("2b0e"),r=n("2f62"),o=(n("c740"),n("a434"),n("a936")),s={tasksList:[],currentTask:{},taskTips:""},c={showTaskTips:function(e,t){e.taskTips=t},addTask:function(e,t){Array.isArray(t)?e.tasksList=t:e.tasksList.push(t),tools.setLocalStorage("tasksList",e.tasksList)},delTask:function(e,t){var n=e.tasksList,a=n.findIndex((function(e){return e.id===t.id}));e.tasksList.splice(a,1),tools.setLocalStorage("tasksList",n)},editTask:function(e,t){for(var n=JSON.parse(JSON.stringify(e.tasksList)),a=0;a<n.length;a++)if(n[a].id===t.id){n[a]=t;break}e.tasksList=n,tools.setLocalStorage("tasksList",n)},chageCurrentTask:function(e,t){e.currentTask=t||{},tools.setLocalStorage("currentTask",t)}},i={initTask:function(e){var t=e.state.currentTask;t.id&&1===t.taskStatus&&e.dispatch("startTask")},runTask:function(e,t){return new Promise((function(n,a){t.taskStatus=1,t.requestTwice=0,e.commit("chageCurrentTask",t),e.commit("editTask",t),e.dispatch("startTask"),n(t)}))},startTask:function(e){var t=e.state.currentTask,n=Object(o["b"])(t)||{};n.type?console.error("任务错误：",t):n.id?Object(o["c"])(n):t.timer=setTimeout((function(){e.dispatch("startTask")}),2e3)},stopTask:function(e){return new Promise((function(t,n){var a=e.state.currentTask;a.id&&(a.taskStatus=0,clearTimeout(a.timer),e.commit("editTask",a),e.commit("chageCurrentTask",a),e.commit("showTaskTips","")),t()}))}},u={namespaced:!0,state:s,mutations:c,actions:i},d=n("7223");a["default"].use(r["a"]);t["a"]=new r["a"].Store({modules:{task:u},state:{userInfo:{},userToken:{},coachInfo:{}},mutations:{saveCoachInfo:function(e,t){e.coachInfo=t},saveUserInfo:function(e,t){e.userInfo=t},saveUserToken:function(e,t){e.userToken=t}},actions:{logout:function(e){e.commit;tools.clearLocalStorage("userInfo"),tools.clearLocalStorage("userToken"),tools.clearLocalStorage("coachInfo"),location.reload()},initInfo:function(e){var t=e.commit,n=e.state;return new Promise((function(e,a){var r=tools.getLocalStorage("userInfo"),o=tools.getLocalStorage("userToken"),s=tools.getLocalStorage("coachInfo"),c=tools.getLocalStorage("tasksList"),i=tools.getLocalStorage("currentTask")||{};c=c&&c.length?c:[{name:"每天",resource:1,resourceStr:"每天",time:["19:00","20:00"],robTime:["20:00","22:00"],taskStatus:0,date:Object(d["c"])("yyyy-MM-DD",+new Date+864e5),id:"1111"}],Object.keys(n.userInfo).length?e():Object.keys(o).length&&Object.keys(r).length?(t("saveUserInfo",r),t("saveUserToken",o),t("saveCoachInfo",s),t("task/addTask",c),t("task/chageCurrentTask",i),e()):a()}))}}})},"4dcb":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s=n("2877"),c={},i=Object(s["a"])(c,r,o,!1,null,null,null),u=i.exports,d=(n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("8c4f")),l=n("4360");a["default"].use(d["a"]);var f=[{path:"/login",name:"login",component:function(){return n.e("about").then(n.bind(null,"9ed6"))},meta:{title:"登录"}},{path:"/home",name:"home",component:function(){return n.e("about").then(n.bind(null,"7abe"))},meta:{title:"主页",noAuth:!1}}],p=new d["a"]({mode:"hash",base:"/banban-reservation/",routes:f});p.beforeEach((function(e,t,n){var a=e.meta.title;document.title=a,e.meta.noAuth?n():"login"===e.name?l["a"].dispatch("initInfo").then((function(){n("/home")})).catch((function(){n()})):l["a"].dispatch("initInfo").then((function(){n()})).catch((function(){n("/login")}))}));var h=p,m=n("5c96"),b=n.n(m);n("0fae");a["default"].use(b.a);n("7f70"),n("4dcb");a["default"].config.productionTip=!1,new a["default"]({router:h,store:l["a"],render:function(e){return e(u)}}).$mount("#app")},7223:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));n("ac1f"),n("5319"),n("d3b7"),n("25f0");function a(e){var t=/^1[2-9][0-9]{9}$/;return t.test(e)}function r(e){return Date.parse(e)}function o(e,t){var n=t?new Date(parseInt(t)):new Date(+new Date),a=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),s=n.getHours(),c=n.getMinutes(),i=n.getSeconds(),u=e.replace(/[YyMmDdHhSs]+/g,(function(e){return"yy"==e||"YY"==e||"y"==e||"Y"==e?a.toString().substring(2):"yyyy"==e||"YYYY"==e?a:"MM"==e?r>=10?r:"0"+r:"M"==e?r:"DD"==e||"dd"==e?o>=10?o:"0"+o:"D"==e||"d"==e?o:"HH"==e||"hh"==e?s>=10?s:"0"+s:"H"==e||"h"==e?s:"mm"==e?c>=10?c:"0"+c:"m"==e?c:"ss"==e||"s"==e?i>=10?i:"0"+i:void 0}));return u}},"7f70":function(e,t,n){n("b680"),function(){var e={ToCurrency:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return parseFloat(parseFloat(e).toFixed(t))},setCookies:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e+"="+t;if(a.path=a.path||"/",n){var o=(new Date).getTime()/1e3+n,s=new Date(1e3*o);r+="; expires="+s.toGMTString()}a.path&&(r+="; path="+a.path),a.domain&&(r+="; domain="+a.domain),document.cookie=r},getCookie:function(e){var t=document.cookie,n=e+"=",a=t.indexOf(n),r=null;if(a>-1){var o=t.indexOf(";",a);o=o>-1?o:t.length,r=t.substring(a+n.length,o)}return r},clearCookies:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setCookies(e,"",-1,t)},getLocalStorage:function(e){var t=JSON.parse(localStorage.getItem(e));if(t){if(t.expires){var n=parseInt(+new Date/1e3);if(n>t.expires)return this.clearLocalStorage(e),null}return t[e]}return null},setLocalStorage:function(e,t,n){var a={};if(a[e]=t,n){var r=parseInt(+new Date/1e3)+n;a["expires"]=r}localStorage.setItem(e,JSON.stringify(a))},clearLocalStorage:function(e){e?localStorage.removeItem(e):localStorage.clear()}};window.tools=e}()},a936:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return h}));var a=n("b85c"),r=n("1da1"),o=(n("96cf"),n("99af"),n("b0c0"),n("a15b"),n("7223")),s=n("ca70"),c=n("4360"),i=n("5c96");function u(e){if(!e.id||0===e.taskStatus)return console.error("任务错误：",e),{type:"error"};var t=+new Date;e.requestTwice++,t+=864e5;var n=Object(o["a"])(e.date+" "+e.robTime[0]),a=Object(o["a"])(e.date+" "+e.robTime[1]);if(t>a){var r="任务: ".concat(e.name,"，排课：").concat(e.date," ").concat(e.time.join("-"),"; 已结束。");return c["a"].commit("task/showTaskTips",r),c["a"].dispatch("task/stopTask"),i["MessageBox"].alert(r,"提示",{showClose:!1}).then((function(){p()})),{type:"timeout"}}var s="任务: ".concat(e.name," ").concat(e.date," ").concat(e.time.join("~"),", 等待任务命中:").concat(e.requestTwice,"次,开抢时间：").concat(e.robTime.join("至"),"; 执行时间：").concat(Object(o["c"])("yyyy-MM-DD hh:mm:ss",+new Date));if(c["a"].commit("task/showTaskTips",s),console.log(s),t>n&&t<a){var u="任务命中; 执行时间：".concat(Object(o["c"])("yyyy-MM-DD hh:mm:ss",+new Date));return c["a"].commit("task/showTaskTips",u),console.info(u,e),e}}function d(e){e.requestTwice=1,l(e)}function l(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,u,d,f,m,b,g,v,T,k,y,w,j,O,S;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c["a"].state.userInfo,r=c["a"].state.coachInfo,e.prev=2,u="任务: ".concat(t.name," ").concat(t.date," ").concat(t.time.join("~"),", 接口请求:").concat(t.requestTwice,"次; 执行时间：").concat(Object(o["c"])("yyyy-MM-DD hh:mm:ss",+new Date)),c["a"].commit("task/showTaskTips",u),console.warn(u),e.next=8,Object(s["d"])({companyID:n.student.schoolThirdpartyId,coachID:r.coachId,planDate:t.date,stuID:n.student.thirdpartyId,carType:n.student.modelCar,subjectId:n.student.learnDriverProgress});case 8:if(d=e.sent,f=d.result,!f||!f.length){e.next=36;break}m=Object(o["a"])(t.date+" "+t.time[0]),b=Object(o["a"])(t.date+"  "+t.time[1]),g=Object(a["a"])(f),e.prev=14,g.s();case 16:if((v=g.n()).done){e.next=25;break}if(T=v.value,k=Object(o["a"])(t.date+" "+T.startTime),y=Object(o["a"])(t.date+" "+T.endTime),m!==k||b!==y){e.next=23;break}return h(T),e.abrupt("return");case 23:e.next=16;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](14),g.e(e.t0);case 30:return e.prev=30,g.f(),e.finish(30);case 33:Object(i["MessageBox"])({title:"消息",dangerouslyUseHTMLString:!0,message:"<p>没有匹配到".concat(t.date,"的排课</p>\n                <p>您要自动预约的是").concat(t.date," ").concat(t.time.join("至"),"时间段的排班</p>"),confirmButtonText:"确定",showClose:!1}).then((function(e){c["a"].commit("task/showTaskTips","没有匹配到".concat(t.date,"的排课")),c["a"].dispatch("task/stopTask")})),e.next=40;break;case 36:w=+new Date,j=Object(o["c"])("yyyy-MM-DD",w)+" "+t.robTime[1],O=Object(o["a"])(j),w>O?(S="本次接口请求任务结束，任务失败: 开抢时间已结束",c["a"].commit("task/showTaskTips",S),c["a"].dispatch("task/stopTask"),console.log(S),i["MessageBox"].alert(S,"提示",{showClose:!1}).then((function(){p()}))):(t.requestTwice++,t.timer=setTimeout((function(){l(t)}),2e3));case 40:e.next=45;break;case 42:e.prev=42,e.t1=e["catch"](2),console.error(e.t1);case 45:case"end":return e.stop()}}),e,null,[[2,42],[14,27,30,33]])}))),f.apply(this,arguments)}function p(){var e=c["a"].state.task.currentTask;if(1===e.resource){var t=Object(o["c"])("YYYY-MM-DD",+new Date+864e5);return e.date===t?e.date=Object(o["c"])("YYYY-MM-DD",+new Date+1728e5):e.date=t,c["a"].dispatch("task/runTask",e),!0}}function h(e){var t=c["a"].state.userInfo,n=c["a"].state.coachInfo,a=String(e.planId);Object(s["a"])({companyID:t.student.schoolThirdpartyId,coachID:n.coachId,planId:a,stuId:t.student.thirdpartyId,reservationPeople:t.student.studentType}).then((function(e){var t=e.result.remark;c["a"].dispatch("task/stopTask"),c["a"].commit("task/showTaskTips",t),Object(i["MessageBox"])({title:"消息",dangerouslyUseHTMLString:!0,message:"".concat(t),confirmButtonText:"确定",showClose:!1}).then((function(){p()}))})).catch((function(e){var t="服务器错误，请联系管路员！";c["a"].commit("task/showTaskTips",t),Object(i["MessageBox"])({title:"错误",message:"<h1>".concat(t,"</h1>"),dangerouslyUseHTMLString:!0,confirmButtonText:"确定",showClose:!1})}))}},b33d:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var a=n("5530"),r=(n("ac1f"),n("5319"),n("d3b7"),n("a4d3"),n("e01a"),n("caad"),n("2532"),n("bc3a")),o=n.n(r),s=n("4328"),c=n.n(s),i=n("5c96"),u=n("4360");function d(){var e={"app-type":"1","ctl-device-id":"android_device_id","device-type":"android","version-code":"26","version-name":"4.5.14","version-type":"student"},t=u["a"].state.userToken["ctl-token"];return t&&(e["ctl-token"]=t),e}function l(e,t){var n=String(e).replace(/[^0-9]+/g,"")-0;if(t)return t;switch(n){case 400:return"Bad Request (错误的请求)";case 401:return"Unauthorized (请求要求身份验证)";case 403:return"Forbidden (服务器拒绝请求)";case 404:return"NOT Found (服务器找不到请求的资源)";case 405:return"Bad Request (禁用请求中指定的方法)";case 406:return"Not Acceptable (无法使用请求的内容特性响应请求的网页)";case 407:return"Proxy Authentication Required (需要代理授权)";case 408:return"Request Timed-Out (服务器等候请求时发生超时)";case 409:return"Conflict (服务器在完成请求时发生冲突。服务器必须在响应中包含有关冲突的信息)";case 410:return"Gone (请求的资源已被永久删除)";case 411:return"Length Required (服务器不接受不含有效内容长度标头字段的请求)";case 412:return"Precondition Failed (未满足前提条件)";case 413:return"Request Entity Too Large (请求实体过大)";case 414:return"Request, URI Too Large (请求的 URI 过长)";case 415:return"Unsupported Media Type (不支持的媒体类型)";case 429:return"您的操作过于频繁,请稍后重试";case 500:return"Internal Server Error (服务器内部错误)";case 501:return"Not Implemented (尚未实施)";case 502:return"Bad Gateway (错误网关)";case 503:return"Server Unavailable (服务不可用)";case 504:return"Gateway Timed-Out (网关超时)";case 505:return"HTTP Version not supported (HTTP 版本不受支持)";default:return t}}o.a.CancelToken;var f={baseURL:"/",timeout:4e4},p=o.a.create(f);function h(e,t,n){var a=n.method||"GET",r="json"===n.action?"application/json;charset=UTF-8":"application/x-www-form-urlencoded",o=n.cancelToken,s={userConfig:{showError:!1!==n.showError,showLoading:n.showLoading,options:n},url:e,method:a,headers:{"Content-Type":r},paramsSerializer:function(e){var t="";for(var n in e)Object.prototype.toString.call("[object Array]"===e[n])&&(t=n);return c.a.stringify(e,{arrayFormat:t})},cancelToken:o};return s["GET"===a?"params":"data"]=t,p(s)}p.interceptors.request.use((function(e){var t=e.userConfig.options;return t.headers&&(e.headers=Object(a["a"])({},t.headers)),e.headers=Object(a["a"])({},d()),e})),p.interceptors.response.use((function(e){var t=e.data,n=e.config.userConfig;return"200"===t.code||1===t.code?t:"-1"===t.code?(i["MessageBox"].confirm(t.message,"提示",{confirmButtonText:"确定",showClose:!1,closeOnClickModal:!1,showCancelButton:!1}).then((function(){u["a"].dispatch("logout")})),Promise.reject(t)):(n.showError&&i["Message"].error(t.message||t.description),Promise.reject(t))}),(function(e){var t=e.response;return e.message.includes("timeout")?i["Message"].error(l(504,"响应超时")||"服务器异常"):i["Message"].error(t?l(e.response.status):"网络异常！"),Promise.reject(e)}));var m="http://18.224.19.73:3001",b={baseUrl:m};function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n["method"]="GET",e=b["baseUrl"]+e,h(e,t,n)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n["method"]="POST",n["action"]=n["action"]||"json",e=b["baseUrl"]+e,h(e,t,n)}console.log(Object({NODE_ENV:"production",VUE_APP_API:"http://18.224.19.73:3001",VUE_APP_ENV:"production",VUE_APP_PAGENAME:"banban",VUE_APP_PUBLICPATCH:"/banban-reservation/",BASE_URL:"/banban-reservation/"}))},ca70:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return u}));var a=n("b33d");function r(e){return Object(a["b"])("/v1/banban/getPlanInfo",e)}function o(e){return Object(a["b"])("/v1/banban/getStudentHour",e)}function s(e){return Object(a["b"])("/v1/banban/reservation",e)}function c(e){return Object(a["b"])("/v1/banban/getCoachDetail",e)}function i(e){return Object(a["b"])("/v1/banban/getCoachHeadPhoto",e)}function u(e){return Object(a["b"])("/v1/banban/getStudyInfo",e)}}});